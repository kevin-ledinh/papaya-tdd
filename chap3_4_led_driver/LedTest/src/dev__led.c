/*******************************************************************************
 *    INCLUDED FILES
 ******************************************************************************/
 #include "dev__led.h"
 
/*******************************************************************************
 *    DEFINITIONS
 ******************************************************************************/
 
/*******************************************************************************
 *    PRIVATE TYPES
 ******************************************************************************/
enum 
{
    ALL_LEDS_ON = ~0, 
    ALL_LEDS_OFF = ~ALL_LEDS_ON
};
 
/*******************************************************************************
 *    PRIVATE DATA
 ******************************************************************************/
static uint16_t * led_addr;
static uint16_t ledsImage;

/*******************************************************************************
 *    PROTOTYPES
 ******************************************************************************/
static uint16_t dev__led_convert_led_number_to_bit( int led_number );

/*******************************************************************************
*    PUBLIC FUNCTIONS
******************************************************************************/

/*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
void dev__led_init( uint16_t * address )
{
    led_addr = address;
    ledsImage = ALL_LEDS_OFF;
    * led_addr = 0;
}

/*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
void dev__led_deinit( void )
{
}

/*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
void dev__led_set( int led_number )
{
    ledsImage |= dev__led_convert_led_number_to_bit( led_number );
    * led_addr = ledsImage;
}

/*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
void dev__led_clear( int led_number )
{
    ledsImage &= ~( dev__led_convert_led_number_to_bit( led_number ) );
    * led_addr = ledsImage;
}

/*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
void dev__led_set_all( void )
{
    ledsImage = ALL_LEDS_ON;
    * led_addr = ledsImage;
}
    
/*******************************************************************************
 *    PRIVATE FUNCTIONS
 ******************************************************************************/

 /*****************************************************************************
 *  Function:
 *  Purpose:
*******************************************************************************/
static uint16_t dev__led_convert_led_number_to_bit( int led_number )
{
    return 1 << (led_number - 1);
}
