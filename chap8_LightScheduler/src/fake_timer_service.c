/*============================================================================
@brief A C source for the fake timer service
------------------------------------------------------------------------------
<!-- Written by Kevin Le Dinh -->
<!-- Copyright (C) 2018 All rights reserved -->
============================================================================*/

/*----------------------------------------------------------------------------
  @brief
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  include files
----------------------------------------------------------------------------*/
#include "fake_timer_service.h"

/*----------------------------------------------------------------------------
  manifest constants
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  type definitions
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  macros
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  prototypes
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  global variables
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  static variables
----------------------------------------------------------------------------*/
static Time _time;
static time_service_alarm_t time_service_alarm;
/*----------------------------------------------------------------------------
  public functions
----------------------------------------------------------------------------*/

/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
void fake_timer_service_set_day( Day day )
{
    _time.day = day;
}

/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
void fake_timer_service_set_minutes( int minutes )
{
    _time.minuteOfDay = minutes;
}

/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
time_service_alarm_callback_t fake_timer_service_get_alarm_callback( void )
{
    return time_service_alarm.alarm_callback;
}

/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
int fake_timer_service_get_alarm_period( void )
{
    return time_service_alarm.period_seconds;
}
/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
void time_service_get_time( Time * time )
{
    time -> day = _time.day;
    time -> minuteOfDay = _time.minuteOfDay;
}

/*============================================================================
@brief
------------------------------------------------------------------------------
@note
============================================================================*/
void time_service_set_periodic_alarm_in_seconds( int seconds , time_service_alarm_callback_t callback )
{
    time_service_alarm.period_seconds = seconds;
    time_service_alarm.alarm_callback = callback;
}

/*----------------------------------------------------------------------------
  private functions
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  End of file
----------------------------------------------------------------------------*/
