/*============================================================================
@brief A C source header for the real timer service
------------------------------------------------------------------------------
<!-- Written by Kevin Le Dinh -->
<!-- Copyright (C) 2018 All rights reserved -->
============================================================================*/

#ifndef timer_service_h
#define timer_service_h

/*----------------------------------------------------------------------------
  @brief

----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  nested include files
----------------------------------------------------------------------------*/
#include "dev__light_scheduler.h"

/*----------------------------------------------------------------------------
  macros
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  manifest constants
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  type definitions
----------------------------------------------------------------------------*/
struct Time
{
    Day day;
    int minuteOfDay;
};
typedef struct Time Time;

typedef void ( * time_service_alarm_callback_t ) ( void );

typedef struct time_service_alarm_s
{
    int period_seconds;
    time_service_alarm_callback_t alarm_callback;
}time_service_alarm_t;

/*----------------------------------------------------------------------------
  extern variables
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  prototypes
----------------------------------------------------------------------------*/
void time_service_get_time( Time * time );
void time_service_set_periodic_alarm_in_seconds( int seconds , time_service_alarm_callback_t callback );

/*----------------------------------------------------------------------------
  compile time checks
----------------------------------------------------------------------------*/

#endif

/*----------------------------------------------------------------------------
  End of file
----------------------------------------------------------------------------*/
